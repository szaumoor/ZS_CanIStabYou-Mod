BACKUP "weidu_external/backup/ZS_CanIStabYou"
SUPPORT "RoyalProtector at Gibberlings's forum https://www.gibberlings3.net/profile/12720-royalprotector/"
VERSION "v1.0.2"
README ~%MOD_FOLDER%/README.md~
AUTO_EVAL_STRINGS
/////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////
LANGUAGE
"English"
"english"
"ZS_CanIStabYou/lang/english/setup.tra"

/////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////// BACKSTAB IMMUNITY REMOVALS /////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////

BEGIN @99 DESIGNATED 99 GROUP @30 // everything can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_99.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @106 DESIGNATED 106 GROUP @30 // humanoids can be backstabbed (except ToB bosses)
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_106.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @102 DESIGNATED 102 GROUP @30 // humanoid ToB bosses can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_102.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @107 DESIGNATED 107 GROUP @30 // Gromnir can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~102~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_107.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @103 DESIGNATED 103 GROUP @30 // Yaga Shura can be backstabbed
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_103.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @112 DESIGNATED 112 GROUP @30 // Sendai can be backstabbed
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~102~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_112.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @122 DESIGNATED 122 GROUP @30 // Balthazar can be backstabbed
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~102~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_122.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @113 DESIGNATED 113 GROUP @30 // Abazigal can be backstabbed (human form)
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_113.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @114 DESIGNATED 114 GROUP @30 // Abazigal can be backstabbed (dragon form)
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_114.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @105 DESIGNATED 105 GROUP @30 // Amelyssan can be backstabbed
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~102~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_105.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @121 DESIGNATED 121 GROUP @30 // Bhaal's avatars can be backstabbed
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_121.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @100 DESIGNATED 100 GROUP @30 // Beholders can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_100.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @115 DESIGNATED 115 GROUP @30 // celestials can be backstabbed
REQUIRE_PREDICATE GAME_IS "bgee iwdee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_115.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @117 DESIGNATED 117 GROUP @30 // Demogorgon can be backstabbed
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_117.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @116 DESIGNATED 116 GROUP @30 // Fiends other than Demogorgon can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_116.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @109 DESIGNATED 109 GROUP @30 // Demiliches can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_109.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @110 DESIGNATED 110 GROUP @30 // Dragons except Abazigal can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_110.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @101 DESIGNATED 101 GROUP @30 // Golems can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_101.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @104 DESIGNATED 104 GROUP @30 // Minotaurs can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_104.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @118 DESIGNATED 118 GROUP @30 // Liches can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_118.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @108 DESIGNATED 108 GROUP @30 // Slimes can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_108.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @120 DESIGNATED 120 GROUP @30 // Mist creatures can be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
FORBID_COMPONENT ~ZS_CanIStabYou.tp2~ ~99~ @52
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_120.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////// BACKSTAB IMMUNITY ENFORCEMENTS /////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @201 DESIGNATED 201 GROUP @31 // Spectral creatures cannot be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_201.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @205 DESIGNATED 205 GROUP @31 // Golems cannot be backstabbed
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_205.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////// INVISIBILITY DETECTION REMOVALS ////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @300 DESIGNATED 300 GROUP @32 // Creatures that can see through invisibility are immune to backstabs (2.6+)
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_300.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @301 DESIGNATED 301 GROUP @32 // No creature can see through invisibility
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_301.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @302 DESIGNATED 302 GROUP @32 // Dragons cannot see through invisibility, except Abazigal
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_302.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @303 DESIGNATED 303 GROUP @32 // Demons cannot see through invisibility, except Demogorgon
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_303.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @304 DESIGNATED 304 GROUP @32 // Celestials cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_304.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @305 DESIGNATED 305 GROUP @32 // Liches cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_305.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @306 DESIGNATED 306 GROUP @32 // Demiliches cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "iwdee bgee bg2ee eet" @50
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_306.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @307 DESIGNATED 307 GROUP @32 // The Unseeing Eye cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_307.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @308 DESIGNATED 308 GROUP @32 // Sendai cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_308.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @309 DESIGNATED 309 GROUP @32 // Balthazar cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_309.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @310 DESIGNATED 310 GROUP @32 // Yaga Shura cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_310.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @311 DESIGNATED 311 GROUP @32 // Amelyssan cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_311.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @312 DESIGNATED 312 GROUP @32 // Abazigal cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_312.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @313 DESIGNATED 313 GROUP @32 // Demogorgon cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_313.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
BEGIN @314 DESIGNATED 314 GROUP @32 // Bhaal's avatars cannot see through invisibility
REQUIRE_PREDICATE GAME_IS "bg2ee eet" @51
/////////////////////////////////////////////////////////////////////////////////////////////////////

INCLUDE ~%MOD_FOLDER%/libs/components/zs_csyf_314.tph~

/////////////////////////////////////////////////////////////////////////////////////////////////////
